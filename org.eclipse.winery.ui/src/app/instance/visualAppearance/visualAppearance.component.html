<!--
/**
 * Copyright (c) 2017 University of Stuttgart.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * and the Apache License 2.0 which both accompany this distribution,
 * and are available at http://www.eclipse.org/legal/epl-v10.html
 * and http://www.apache.org/licenses/LICENSE-2.0
 *
 * Contributors:
 *     Lukas Balzer - initial API and implementation
 */
-->

<div [class.hidden]="!loading">
    <winery-loader></winery-loader>
</div>
<div *ngIf="!loading">
    <br/>
    <div class="colorPickerArea" *ngIf="!loading && nodeTypeData != null">
        <div class="floatContent">
            <b>Bordercolor:</b><br>
            <input class="colorInput" name="eventColor" type="color" [(ngModel)]="borderColorLocal">
            <br/>click on the area above to change border color<br/>
        </div>
    </div>
    <div class="colorPickerArea" *ngIf="!loading && relationshipData != null">
        <div class="floatContent">
            <b>Line color:</b><br>
            <input class="colorInput" name="eventColor" type="color" [(ngModel)]="colorLocal">
            <br/> click on the area above to change line color<br/>
        </div>
        <div class="floatContent">
            <b>Color when hovered:</b><br>
            <input class="colorInput" name="eventColor" type="color" [(ngModel)]="hoverColorLocal">
            <br/>click on the area above to change hover color<br/>
        </div>
    </div>
    <div class="uploadImgArea">
        <b>Icon (16x16) used in palette</b><br>
        <div ng2FileDrop
             [ngClass]="{'nv-file-over': hasImg16DropZoneOver}"
             (fileOver)="hasImg16DropZoneOver=onUpload(img16uploader,$event);"
             [uploader]="img16uploader"
             class="imgDropZone">
            <img src="{{img16Path}}" height="16" width="16">
            <button class="btn btn-default btn-xs upload" type="button" (click)="upload16Modal.show();"> upload..
            </button>
        </div>
        <br/>
        <div *ngIf="service.isNodeType">
            <b>Icon (50x50) used in the node template shapes</b><br/>
            <div ng2FileDrop
                 [ngClass]="{'nv-file-over': hasImg50DropZoneOver}"
                 (fileOver)="hasImg50DropZoneOver=onUpload(img50uploader,$event);"
                 [uploader]="img50uploader"
                 class="imgDropZone">
                <img src="{{img50Path}}" height="50" width="50">
                <button class="btn btn-default btn-xs upload" type="button" (click)="upload50Modal.show();">upload..
                </button>
            </div>
            <br/>
        </div>
    </div>
</div>
<div class="arrowSelectArea" *ngIf="relationshipData != null">
    <b>Line style:</b><br>
    choose the style used for the connection line between the node and the relationship in the topologymodeler<br/>
    by <b>clicking on the different parts of the connection</b> shown below<p>
    <div class="slot">
        <b>Source:</b><br/>
        <div>
            <span class="header item"
                  [ngClass]="{noneSource: relationshipData?.sourcearrowhead === 'none',
                              PlainArrowSource: relationshipData?.sourcearrowhead === 'PlainArrow',
                              DiamondSource: relationshipData?.sourcearrowhead === 'Diamond'}"
                  (click)="selectArrowItem('sourcearrowhead');"></span>
        </div>
        <div class="list" *ngIf="relationshipData?.boolData.sourcearrowheadSelected">
            <span class="list item noneSource" (click)="selectArrowItem('sourcearrowhead','none');"></span>
            <span class="list item PlainArrowSource"
                  (click)="selectArrowItem('sourcearrowhead','PlainArrow');"></span>
            <span class="list item DiamondSource"
                  (click)="selectArrowItem('sourcearrowhead','Diamond');"></span>
        </div>
    </div>
    <div class="slot">
        <b>Line style:</b><br/>
        <div>
            <span class="header item middle"
                  [ngClass]="{plainLine: relationshipData?.dash === 'plain',
                              dottedLine: relationshipData?.dash === 'dotted',
                              dotted2Line: relationshipData?.dash === 'dotted2'}"
                  (click)="selectArrowItem('dash');"></span>
        </div>
        <div class="list" *ngIf="relationshipData?.boolData.dashSelected;">
            <span class="list item middle plainLine" (click)="selectArrowItem('dash', 'plain');"></span>
            <span class="list item middle dottedLine" (click)="selectArrowItem('dash', 'dotted');"></span>
            <span class="list item middle dotted2Line" (click)="selectArrowItem('dash', 'dotted2');"></span>
        </div>
    </div>
    <div class="slot">
        <b>Target:</b><br/>
        <div>
            <span class="header item"
                  [ngClass]="{noneTarget: relationshipData?.targetarrowhead === 'none',
                              PlainArrowTarget: relationshipData?.targetarrowhead === 'PlainArrow',
                              DiamondTarget: relationshipData?.targetarrowhead === 'Diamond'}"
                  (click)="selectArrowItem('targetarrowhead');"></span>
        </div>
        <div class="list" *ngIf="relationshipData?.boolData.targetarrowheadSelected">
            <span class="list item noneTarget" (click)="selectArrowItem('targetarrowhead','none');"></span>
            <span class="list item PlainArrowTarget"
                  (click)="selectArrowItem('targetarrowhead','PlainArrow');"></span>
            <span class="list item DiamondTarget"
                  (click)="selectArrowItem('targetarrowhead','Diamond');"></span>
        </div>
    </div>
</div>
<button (click)="saveToServer()" class="btn btn-info btn-sm save">save</button>

<winery-modal bsModal #upload16Modal="bs-modal" [modalRef]="upload16Modal">
    <winery-modal-header [title]="'Upload Icon (16x16) used in palette'">
    </winery-modal-header>
    <winery-modal-body>
        <div class="modal-upload">
            <b>File</b>
            <input type="file" ng2FileSelect [uploader]="img16uploader"
                   (change)="onUpload(img16uploader,false, upload16Modal);"/>
            <div ng2FileDrop
                 [ngClass]="{'nv-file-over': hasImg16DropZoneOver}"
                 (fileOver)="hasImg16DropZoneOver=onUpload(img16uploader,$event, upload16Modal);"
                 [uploader]="img16uploader"
                 class="imgDropZone">
                You may also <b>drop the file</b> here.
            </div>
            <br/>
            The file is <b>immediately</b> uploaded without any confirmation.
        </div>
    </winery-modal-body>
    <winery-modal-footer [showDefaultButtons]="false">
        <button type="button" class="btn btn-default" (click)="upload16Modal.hide()">Cancel</button>
    </winery-modal-footer>
</winery-modal>

<winery-modal bsModal #upload50Modal="bs-modal" [modalRef]="upload50Modal">
    <winery-modal-header [title]="'Upload Icon (50x50) used in palette'">
    </winery-modal-header>
    <winery-modal-body>
        <div class="modal-upload">
            <input type="file" ng2FileSelect [uploader]="img50uploader"
                   (change)="onUpload(img50uploader,false, upload50Modal);"/>
            <div ng2FileDrop
                 [ngClass]="{'nv-file-over': hasImg50DropZoneOver}"
                 (fileOver)="hasImg50DropZoneOver=onUpload(img50uploader,$event, upload50Modal);"
                 [uploader]="img50uploader"
                 class="imgDropZone">
                You may also <b>drop the file</b> here.
            </div>
            <br/>
            The file is <b>immediately</b> uploaded without any confirmation.
        </div>
    </winery-modal-body>
    <winery-modal-footer [showDefaultButtons]="false">
        <button type="button" class="btn btn-default" (click)="upload50Modal.hide()">Cancel</button>
    </winery-modal-footer>
</winery-modal>
